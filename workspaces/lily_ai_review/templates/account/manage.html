{% extends "base.html" %}

{% block title %}Manage Account - Lily AI Research Assistant{% endblock %}

{% block content %}
<div class="min-h-screen sentry-bg dashboard-content">
    <!-- Background Orbs -->
    <div class="orb-container">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
        <div class="orb orb-4"></div>
        <div class="orb orb-5"></div>
        <div class="orb orb-6"></div>
        <div class="spotlight"></div>
    </div>

    <!-- Page Header -->
    <header class="glass-effect shadow relative z-10">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-white">Manage Account</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 relative z-10">
        <!-- Account Management -->
        <div class="glass-effect rounded-xl p-6 mb-8">
            <h2 class="text-xl font-semibold text-white mb-4">Account Management</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Cancel Subscription -->
                <div class="bg-indigo-900 bg-opacity-30 rounded-lg p-6 border border-indigo-800">
                    <h3 class="text-lg font-semibold text-white mb-3">Cancel Subscription</h3>
                    <p class="text-white text-opacity-90 mb-4">
                        If you no longer need premium features, you can downgrade to a free account. You'll still have access to sample papers.
                    </p>
                    <div class="bg-yellow-900 bg-opacity-30 rounded-lg p-4 border border-yellow-800 mb-6">
                        <div class="flex items-start">
                            <svg class="w-5 h-5 text-yellow-400 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            <span class="text-white text-opacity-90">
                                <strong class="text-yellow-300">Note:</strong> Canceling your subscription will take effect at the end of your current billing period. You'll still have access to premium features until then.
                            </span>
                        </div>
                    </div>
                    <a href="/billing/cancel-subscription" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-yellow-600 to-yellow-700 text-white text-base font-medium rounded-md shadow-sm hover:from-yellow-700 hover:to-yellow-800 transition-all duration-200" onclick="return confirm('Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.')">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        Cancel Subscription
                    </a>
                </div>

                <!-- Delete Account -->
                <div class="bg-indigo-900 bg-opacity-30 rounded-lg p-6 border border-indigo-800">
                    <h3 class="text-lg font-semibold text-white mb-3">Delete Account</h3>
                    <p class="text-white text-opacity-90 mb-4">
                        If you wish to completely remove your account and all associated data from our system.
                    </p>
                    <div class="bg-red-900 bg-opacity-30 rounded-lg p-4 border border-red-800 mb-6">
                        <div class="flex items-start">
                            <svg class="w-5 h-5 text-red-400 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            <span class="text-white text-opacity-90">
                                <strong class="text-red-300">Warning:</strong> This action is permanent and cannot be undone. All your data, including papers and account information, will be permanently deleted.
                            </span>
                        </div>
                    </div>
                    <a href="/account/delete" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white text-base font-medium rounded-md shadow-sm hover:from-red-700 hover:to-red-800 transition-all duration-200" onclick="return confirm('Are you absolutely sure you want to delete your account? This action cannot be undone and all your data will be permanently lost.')">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        Delete Account
                    </a>
                </div>
            </div>
        </div>

        <!-- FAQ Section -->
        <div class="glass-effect rounded-xl p-6">
            <h2 class="text-xl font-semibold text-white mb-4">Frequently Asked Questions</h2>

            <div class="space-y-4">
                <div class="bg-indigo-900 bg-opacity-30 rounded-lg p-4 border border-indigo-800">
                    <button class="faq-toggle flex justify-between items-center w-full text-left">
                        <span class="text-white font-medium">What happens when I cancel my subscription?</span>
                        <svg class="w-5 h-5 text-indigo-400 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-content hidden mt-2">
                        <p class="text-white text-opacity-90">
                            When you cancel your subscription, you'll continue to have access to all premium features until the end of your current billing period. After that, your account will revert to a free account with access to sample papers only.
                        </p>
                    </div>
                </div>

                <div class="bg-indigo-900 bg-opacity-30 rounded-lg p-4 border border-indigo-800">
                    <button class="faq-toggle flex justify-between items-center w-full text-left">
                        <span class="text-white font-medium">What happens when I delete my account?</span>
                        <svg class="w-5 h-5 text-indigo-400 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-content hidden mt-2">
                        <p class="text-white text-opacity-90">
                            When you delete your account, all your personal information will be anonymized and you will no longer be able to log in. Any active subscriptions will be canceled. This action cannot be undone.
                        </p>
                    </div>
                </div>

                <div class="bg-indigo-900 bg-opacity-30 rounded-lg p-4 border border-indigo-800">
                    <button class="faq-toggle flex justify-between items-center w-full text-left">
                        <span class="text-white font-medium">Can I get a refund if I cancel my subscription?</span>
                        <svg class="w-5 h-5 text-indigo-400 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-content hidden mt-2">
                        <p class="text-white text-opacity-90">
                            We don't offer refunds for partial subscription periods. When you cancel, you'll continue to have access until the end of your current billing period.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // FAQ toggles
        const faqToggles = document.querySelectorAll('.faq-toggle');
        faqToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                const content = this.nextElementSibling;
                const icon = this.querySelector('svg');
                
                // Toggle content visibility
                content.classList.toggle('hidden');
                
                // Rotate icon
                if (content.classList.contains('hidden')) {
                    icon.classList.remove('rotate-180');
                } else {
                    icon.classList.add('rotate-180');
                }
            });
        });
    });
</script>
{% endblock %}
